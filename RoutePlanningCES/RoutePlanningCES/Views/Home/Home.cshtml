@model RoutePlanningCES.Models.DTOs.HomeDTO
@using System.Linq;
@{
    ViewBag.Title = "Route Calculator/Home Page";
}

<div class="row search-area">
    <div class="col-lg-4">
        <div class="form-group">
            @*<label for="source-city-select">Select source city:</label>*@
            <select class="js-example-placeholder-single sour js-states form-control">
                <option></option> 
                @{
                    foreach (var SourceCity in Model.SourceCitites)
                    {
                        <option>@SourceCity</option>
                    }
                }
            </select>
            @*<select class="form-control" id="source-city-select">
                @{
                    foreach (var SourceCity in Model.SourceCitites)
                    {
                        <option>@SourceCity</option>
                    }
                }
            </select>*@
        </div>

        <div class="form-group">
            <select class="js-example-placeholder-single dest js-states form-control">
                <option></option> 
                @{
                    foreach (var DestinationCity in Model.DestinationCitites)
                    {
                        <option>@DestinationCity</option>
                    }
                }
            </select>
            @*<label for="destination-city-select">Select destination city:</label>*@
            @*<select class="form-control" id="destination-city-select">
            @{
                foreach (var DestinationCity in Model.DestinationCitites)
                {
                    <option>@DestinationCity</option>
                }
            }
        </select>*@
        </div>

    </div>
    <div class="col-lg-3">
        <div class="form-group">
            <select class="js-example-placeholder-multiple js-states form-control" multiple="multiple">
                @{
                    foreach (var ParcelType in Model.ParcelTypes)
                    {
                        <option>@ParcelType</option>
                    }
                }
            </select>
            @*<label for="parcel-types-select">Select list:</label>
        <select multiple class="form-control" id="parcel-types-select">
            @{
                foreach (var ParcelType in Model.ParcelTypes)
                {
                    <option>@ParcelType</option>
                }
            }
        </select>*@
        </div>
        <div class="input-group">
            <span class="input-group-addon">Weight</span>
            <input type="text" class="form-control weight" id="weight" aria-label="Weight">
        </div>
    </div>
    <div class="col-lg-3">
        <div class="input-group">
            <span class="input-group-addon">Width</span>
            <input type="text" class="form-control width" id="width" aria-label="Width">
        </div>
        <div class="input-group">
            <span class="input-group-addon">Height</span>
            <input type="text" class="form-control height" id="height" aria-label="Height">
        </div>
        <div class="input-group">
            <span class="input-group-addon">Length</span>
            <input type="text" class="form-control length" id="length" aria-label="Length">
        </div>
    </div>
    <div class="col-lg-2">
        <button type="button" class="btn btn-default calculate-route" onclick="calculateRoute()">Calculate route</button>
    </div>
</div>
<div id="searchResultContainer" style="padding-top: 40px;">
    <div style="border:2px solid gray;">
        <div class="d-flex flex-row mobile space">
            <div class="d-flex flex-column">
                <h2 class="text-center my-3">Fastest</h2>
                <div class="d-flex flex-row">
                    <label><img src="~/Content/Images/pig.svg" style="width: 50px;height: 50px;" /></label>
                    <p> sdsd</p>
                </div>
                <div class="d-flex flex-row">
                    <label><img src="~/Content/Images/time.svg" style="width: 50px;height: 50px;"/></label>
                    <p>sdsd</p>
                </div>
            </div>
            <div class="d-flex justify-content-center flex-column">

                <div class=" d-flex">

                        <div class="line">
                        </div>
                        <div class="path d-flex justify-content-between">


                            <div class="d-flex flex-column">
                                <p style="height:20px; width:30px;">aas</p>
                                <div>
                                    <span class="dot"></span>
                                </div>
                                <p style="height:20px; width:30px;">dsd</p>
                            </div>
                            <div class="d-flex flex-column">
                                <p style="height:20px; width:30px;"> lala</p>
                                <span class="dot"></span>
                                <p style="height:20px; width:30px;">asd</p>
                            </div>
                            <div class="d-flex flex-column">
                                    <p style="height:20px; width:30px;"> asda</p>
                                <span class="dot"></span>
                                    <p style="height:20px; width:30px;">asd</p>
                            </div>
                        </div>

                    }
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(".js-example-placeholder-single.sour").select2({
        placeholder: "Select source city",
        allowClear: true
    });

    $(".js-example-placeholder-single.dest").select2({
        placeholder: "Select destination city",
        allowClear: true
    });

    $(".js-example-placeholder-multiple").select2({
        placeholder: "Select parcel type"
    });

    function calculateRoute() {
        var sourceCity = $(".js-example-placeholder-single.sour").select2("val")
        var destinationCity = $(".js-example-placeholder-single.dest").select2("val");
        var parcelType = $(".js-example-placeholder-multiple").select2("val");

        var weight = document.getElementById('weight').value;
        var height = document.getElementById('height').value;
        var length = document.getElementById('length').value;
        var width = document.getElementById('width').value;

     
        console.log(sourceCity, destinationCity);
        console.log(parcelType);
        console.log(weight);
        console.log(width);
        console.log(height);
        console.log(length);

        var parcelTypesToPass = parcelType.join();
        //console.log(test);

        $.ajax({
            url: '/SearchResult/SearchResult',
            data: { width: width, height: height, length: length, weight: weight, sourceCity: sourceCity, destinationCity: destinationCity, parcelType: parcelTypesToPass },
            dataType: 'html',
            success: function (resultedRoutes) {
                $('#searchResultContainer').html(resultedRoutes);
            }
        });
        document.getElementById('weight').value = '';
        document.getElementById('length').value = '';
        document.getElementById('width').value = '';
        document.getElementById('height').value = '';
    }
</script>